<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Doctor - GitHub Pages</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/templates.css">
    <link rel="stylesheet" href="css/tooltips.css">
    <link rel="stylesheet" href="css/scan-request.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <img src="assets/images/logo.svg" alt="Template Doctor Logo">
                <h1>Template Doctor</h1>
            </div>
            <div id="user-info" class="user-info">
                <button id="login-button" class="login-button">
                    <i class="fab fa-github"></i> Login with GitHub
                </button>
                <div id="user-profile" class="user-profile" style="display: none;">
                    <span id="username">Not logged in</span>
                    <img id="user-avatar" src="" alt="User Avatar">
                    <button id="logout-button" class="logout-button">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <section id="welcome-section" class="welcome-section">
            <h2>Azure Template Compliance Checker</h2>
            <p class="welcome-text">
                Welcome to Template Doctor! This tool helps you analyze Azure Developer CLI (AZD) templates for compliance with the official 
                <a href="https://github.com/Azure-Samples/azd-template-artifacts/blob/main/docs/development-guidelines/definition-of-done.md" target="_blank">Definition of Done</a>. 
                Login with GitHub to get started, then search for a repository to analyze.
            </p>
            
            <div class="features-list">
                <div class="feature-item">
                    <i class="fas fa-search"></i>
                    <h3>Find a Template</h3>
                    <p>Search for any GitHub repository containing Azure Developer CLI templates</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-check-circle"></i>
                    <h3>Check Compliance</h3>
                    <p>Analyze the template against the Definition of Done requirements</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-code"></i>
                    <h3>Fix Issues</h3>
                    <p>Get recommendations to fix compliance issues or create GitHub issues</p>
                </div>
            </div>
        </section>

        <section id="search-section" class="search-section" style="display: none;">
            <div class="search-container">
                <input type="text" id="repo-search" placeholder="Search for a GitHub repository (e.g., Azure-Samples/azd-templates)" class="search-input">
                <button id="search-button" class="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div id="search-results" class="search-results"></div>
            <div id="recent-searches" class="recent-searches">
                <h3>Recent Searches</h3>
                <ul id="recent-list"></ul>
            </div>
        </section>

        <section id="analysis-section" class="analysis-section" style="display: none;">
            <div class="analysis-header">
                <button id="back-button" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back to Search
                </button>
                <div class="repo-info">
                    <h3 id="repo-name">Repository Name</h3>
                    <span id="repo-url">Repository URL</span>
                </div>
            </div>
            <div class="loading-container" id="loading-container" style="display: none;">
                <div class="loading-spinner"></div>
                <p>Analyzing repository... This may take a moment.</p>
            </div>
            <div id="results-container" class="results-container" style="display: none;">
                <!-- Results will be populated by JavaScript -->
            </div>
        </section>

        <section id="error-section" class="error-section" style="display: none;">
            <div class="error-container">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Error</h3>
                <p id="error-message">An error occurred.</p>
                <button id="error-back-button" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back to Search
                </button>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container footer-content">
            <div class="copyright">Â©2025 - DevDiv Microsoft</div>
            <div class="footer-links">
                <a href="https://aka.ms/gallery/submit" class="footer-link" target="_blank">
                    <i class="fas fa-plus-circle"></i> Submit new template to gallery
                </a>
                <a href="https://github.com/Azure-Samples/azd-template-artifacts" target="_blank" class="footer-link">
                    <i class="fas fa-check-square"></i> Definition of Done
                </a>
            </div>
        </div>
    </footer>

    <!-- Debug console (press Alt+D to show) - Must load first for logging -->
    <script src="js/debug-console.js"></script>
    <!-- GitHub OAuth handling -->
    <script src="js/auth.js"></script>
    <!-- GitHub API client -->
    <script src="js/github-client.js"></script>
    <!-- Dashboard generation logic -->
    <script src="js/dashboard-renderer.js"></script>
    <!-- Report loader - handles loading report data from various sources -->
    <script src="js/report-loader.js"></script>
    <!-- GitHub issue handling -->
    <script src="js/github-issue-handler.js"></script>
    <!-- Template Doctor analysis logic -->
    <script src="js/analyzer.js"></script>
    <!-- Template data loader - loads previously scanned templates -->
    <script src="js/templates-data-loader.js"></script>
    <!-- Tooltips functionality -->
    <script src="js/tooltips.js"></script>
    <!-- Main application logic -->
    <script src="js/app.js"></script>
</body>
</html>
